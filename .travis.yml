language: node_js
node_js:
  # yarn is currently broken on node v10
  # see: https://github.com/yarnpkg/yarn/issues/5727
  # - 'node'
  - 'lts/*'

env:
  - BUILD_ENV=production

notifications:
  email: false
  # webhooks:
  #   urls:
  #     - https://webhooks.gitter.im/e/...
  #   on_success: change  # options: [always|never|change] default: always
  #   on_failure: always  # options: [always|never|change] default: always
  #   on_start: never     # options: [always|never|change] default: always

script:
  - NODE_ENV=$BUILD_ENV yarn test --coverage

deploy:
  skip_cleanup: true
  provider: script
  script: yarn coveralls < coverage/lcov.info
  on:
    node: 'lts/*'
    branch: master
